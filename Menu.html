<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Menu & Order - FoodieExpress</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: "Montserrat", sans-serif;
    }
    button i {
      pointer-events: none;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-white shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <a href="index.html" class="flex items-center space-x-2">
          <img
            alt="Logo of a burger icon in orange and white"
            class="w-10 h-10"
            height="40"
            src="https://storage.googleapis.com/a1aa/image/8cf1afa7-f587-4138-8bcf-37fed8ea80c2.jpg"
            width="40"
          />
          <h1 class="text-2xl font-bold text-orange-600">FoodieExpress</h1>
        </a>
      </div>
      <nav class="hidden md:flex space-x-8 text-gray-700 font-semibold">
        <a class="hover:text-orange-600 transition" href="Home.html">Home</a>
        <a class="hover:text-orange-600 transition font-bold text-orange-600" href="menu.html">Menu</a>
        <a class="hover:text-orange-600 transition" href="orders.html">Orders</a>
        <a class="hover:text-orange-600 transition" href="contact.html">Contact</a>
      </nav>
      <button
        aria-label="Open menu"
        class="md:hidden text-gray-700 focus:outline-none"
        id="mobile-menu-button"
      >
        <i class="fas fa-bars fa-lg"></i>
      </button>
    </div>
    <!-- Mobile Menu -->
    <nav class="hidden md:hidden bg-white border-t border-gray-200" id="mobile-menu">
      <a
        class="block px-4 py-3 border-b border-gray-200 text-gray-700 font-semibold hover:bg-orange-50"
        href="index.html"
        >Home</a
      >
      <a
        class="block px-4 py-3 border-b border-gray-200 text-orange-600 font-bold hover:bg-orange-50"
        href="menu.html"
        >Menu</a
      >
      <a
        class="block px-4 py-3 border-b border-gray-200 text-gray-700 font-semibold hover:bg-orange-50"
        href="orders.html"
        >Orders</a
      >
      <a
        class="block px-4 py-3 text-gray-700 font-semibold hover:bg-orange-50"
        href="contact.html"
        >Contact</a
      >
    </nav>
  </header>

  <main class="container mx-auto px-4 py-12 flex flex-col md:flex-row md:space-x-12">
    <!-- Menu List -->
    <section class="md:w-1/3">
      <h2 class="text-3xl font-bold text-orange-600 mb-8">Menu</h2>
      <ul id="menu-list" class="space-y-4">
        <li>
          <button data-id="1" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Classic Cheeseburger
          </button>
        </li>
        <li>
          <button data-id="2" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Margherita Pizza
          </button>
        </li>
        <li>
          <button data-id="3" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Caesar Salad
          </button>
        </li>
        <li>
          <button data-id="4" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Spaghetti Bolognese
          </button>
        </li>
        <li>
          <button data-id="5" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Grilled Chicken Breast
          </button>
        </li>
        <li>
          <button data-id="6" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Fish and Chips
          </button>
        </li>
        <li>
          <button data-id="7" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Vegan Buddha Bowl
          </button>
        </li>
        <li>
          <button data-id="8" class="menu-item w-full text-left px-4 py-3 bg-white rounded-lg shadow hover:bg-orange-50 transition font-semibold text-gray-800">
            Chocolate Fudge Brownie
          </button>
        </li>
      </ul>
    </section>

    <!-- Ingredient & Order Details -->
    <section class="md:w-2/3 bg-white rounded-lg shadow p-6 min-h-[400px] mt-8 md:mt-0 flex flex-col">
      <h2 class="text-2xl font-bold text-orange-600 mb-4" id="item-title">Select a menu item to see ingredients and order options</h2>
      <div id="ingredients-content" class="text-gray-700 text-lg mb-6 flex-grow overflow-auto"></div>

      <div id="order-section" class="hidden flex flex-col space-y-4">
        <h3 class="text-xl font-semibold text-gray-800">Add to Cart</h3>
        <div class="flex flex-col md:flex-row md:space-x-6">
          <div class="flex-1">
            <label for="variant-select" class="block font-semibold mb-1">Choose Variant</label>
            <select id="variant-select" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-600">
              <!-- Options added dynamically -->
            </select>
          </div>
          <div class="flex items-center mt-4 md:mt-0 space-x-2">
            <button id="decrease-qty" aria-label="Decrease quantity" class="bg-orange-600 text-white px-4 py-2 rounded-l-lg hover:bg-orange-700 transition" type="button">
              <i class="fas fa-minus"></i>
            </button>
            <input id="qty-input" aria-label="Quantity" class="w-16 text-center border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-600 rounded-none" min="1" type="number" value="1" inputmode="numeric" pattern="[0-9]*" />
            <button id="increase-qty" aria-label="Increase quantity" class="bg-orange-600 text-white px-4 py-2 rounded-r-lg hover:bg-orange-700 transition" type="button">
              <i class="fas fa-plus"></i>
            </button>
          </div>
          <button id="add-to-cart-btn" class="bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold shadow-md hover:bg-orange-700 transition self-start" type="button">
            Add to Cart
          </button>
        </div>

        <div id="add-cart-message" class="text-green-600 font-semibold mt-2"></div>
      </div>

      <hr class="my-6" />

      <h3 class="text-2xl font-bold text-orange-600 mb-4">Cart</h3>
      <div id="cart-list" class="flex-grow overflow-auto max-h-64">
        <p class="text-gray-600">Your cart is empty.</p>
      </div>
      <div class="mt-4 flex justify-between items-center font-semibold text-lg">
        <span>Total:</span>
        <span id="cart-total-price">$0.00</span>
      </div>
      <button id="checkout-btn" class="mt-4 bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold shadow-md hover:bg-orange-700 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
        Checkout
      </button>
    </section>
  </main>

  <footer class="bg-orange-600 text-white py-6 mt-auto">
    <div class="container mx-auto px-4 text-center text-sm">
      Â© 2024 FoodieExpress. All rights reserved.
    </div>
  </footer>

  <script>
    // Mobile menu toggle
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");
    mobileMenuButton.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });

    // Ingredient and menu data with variants and prices
    const menuData = {
      1: {
        name: "Classic Cheeseburger",
        image: "https://storage.googleapis.com/a1aa/image/53ed0888-9d40-4261-b11f-e05007ed0c6d.jpg",
        ingredients: [
          "Juicy beef patty",
          "Fresh lettuce",
          "Tomato slices",
          "Melted cheddar cheese",
          "Sesame seed bun",
          "Pickles",
          "Ketchup and mustard"
        ],
        variants: [
          { name: "Beef", price: 8.99 },
          { name: "Chicken", price: 8.49 },
          { name: "Veggie", price: 7.99 }
        ]
      },
      2: {
        name: "Margherita Pizza",
        image: "https://storage.googleapis.com/a1aa/image/e903cd98-c753-4d67-7219-034193f28650.jpg",
        ingredients: [
          "Thin pizza crust",
          "Tomato sauce",
          "Fresh basil leaves",
          "Mozzarella cheese",
          "Olive oil drizzle"
        ],
        variants: [
          { name: "Regular", price: 12.5 },
          { name: "Large", price: 15.99 }
        ]
      },
      3: {
        name: "Caesar Salad",
        image: "https://storage.googleapis.com/a1aa/image/0a1b6562-28eb-410c-8a42-d5349f95c466.jpg",
        ingredients: [
          "Romaine lettuce",
          "Caesar dressing",
          "Parmesan cheese",
          "Crunchy croutons",
          "Lemon wedge"
        ],
        variants: [
          { name: "Regular", price: 7.25 },
          { name: "Large", price: 9.5 }
        ]
      },
      4: {
        name: "Spaghetti Bolognese",
        image: "https://storage.googleapis.com/a1aa/image/8799c514-7af5-4869-95c0-926ac9e146af.jpg",
        ingredients: [
          "Spaghetti pasta",
          "Rich tomato meat sauce",
          "Ground beef",
          "Parmesan cheese",
          "Fresh parsley"
        ],
        variants: [
          { name: "Beef", price: 11.0 },
          { name: "Chicken", price: 10.5 }
        ]
      },
      5: {
        name: "Grilled Chicken Breast",
        image: "https://storage.googleapis.com/a1aa/image/c19acfdc-89ab-4af9-b906-371e332c1169.jpg",
        ingredients: [
          "Grilled chicken breast",
          "Steamed mixed vegetables",
          "Herb seasoning",
          "Lemon wedge"
        ],
        variants: [
          { name: "Standard", price: 10.75 }
        ]
      },
      6: {
        name: "Fish and Chips",
        image: "https://storage.googleapis.com/a1aa/image/aacb4198-b3d4-4c29-d314-2f480567781f.jpg",
        ingredients: [
          "Battered fried fish",
          "Golden crispy fries",
          "Tartar sauce",
          "Lemon wedge"
        ],
        variants: [
          { name: "Standard", price: 9.5 }
        ]
      },
      7: {
        name: "Vegan Buddha Bowl",
        image: "https://storage.googleapis.com/a1aa/image/4cb552ee-8c68-4dd5-3c86-ce77b9fe27f8.jpg",
        ingredients: [
          "Quinoa",
          "Avocado",
          "Chickpeas",
          "Fresh vegetables",
          "Tahini dressing"
        ],
        variants: [
          { name: "Standard", price: 9.99 }
        ]
      },
      8: {
        name: "Chocolate Fudge Brownie",
        image: "https://storage.googleapis.com/a1aa/image/6899be0b-5641-4ac4-ded7-a603dfded5cc.jpg",
        ingredients: [
          "Rich chocolate brownie",
          "Vanilla ice cream",
          "Chocolate drizzle",
          "Whipped cream"
        ],
        variants: [
          { name: "Single", price: 5.5 },
          { name: "Double", price: 9.5 }
        ]
      }
    };

    // Cart structure: { uniqueKey: { id, variantName, price, qty } }
    // uniqueKey = id + '|' + variantName
    const cart = {};

    // Elements
    const menuList = document.getElementById("menu-list");
    const ingredientsContent = document.getElementById("ingredients-content");
    const itemTitle = document.getElementById("item-title");
    const variantSelect = document.getElementById("variant-select");
    const qtyInput = document.getElementById("qty-input");
    const decreaseQtyBtn = document.getElementById("decrease-qty");
    const increaseQtyBtn = document.getElementById("increase-qty");
    const addToCartBtn = document.getElementById("add-to-cart-btn");
    const orderSection = document.getElementById("order-section");
    const addCartMessage = document.getElementById("add-cart-message");
    const cartList = document.getElementById("cart-list");
    const cartTotalPrice = document.getElementById("cart-total-price");
    const checkoutBtn = document.getElementById("checkout-btn");

    let currentItemId = null;

    // Show ingredients and variants for selected menu item
    menuList.addEventListener("click", (e) => {
      const btn = e.target.closest("button.menu-item");
      if (!btn) return;

      const id = btn.getAttribute("data-id");
      if (!id || !menuData[id]) return;

      currentItemId = id;
      const data = menuData[id];

      itemTitle.textContent = data.name;

      // Build ingredient HTML
      let html = `<img src="${data.image}" alt="Image of ${data.name}" class="w-full max-w-md rounded-lg mb-6 mx-auto shadow-lg" />`;
      html += "<h3 class='text-xl font-semibold mb-2'>Ingredients:</h3>";
      html += "<ul class='list-disc list-inside space-y-1'>";
      data.ingredients.forEach((ingredient) => {
        html += `<li>${ingredient}</li>`;
      });
      html += "</ul>";

      ingredientsContent.innerHTML = html;

      // Populate variant select
      variantSelect.innerHTML = "";
      data.variants.forEach((variant, idx) => {
        const option = document.createElement("option");
        option.value = variant.name;
        option.textContent = `${variant.name} - $${variant.price.toFixed(2)}`;
        if (idx === 0) option.selected = true;
        variantSelect.appendChild(option);
      });

      qtyInput.value = 1;
      addCartMessage.textContent = "";
      orderSection.classList.remove("hidden");

      // Scroll to order section on small screens
      if (window.innerWidth < 768) {
        orderSection.scrollIntoView({ behavior: "smooth" });
      }
    });

    // Quantity controls
    decreaseQtyBtn.addEventListener("click", () => {
      let val = parseInt(qtyInput.value) || 1;
      if (val > 1) {
        qtyInput.value = val - 1;
      }
    });
    increaseQtyBtn.addEventListener("click", () => {
      let val = parseInt(qtyInput.value) || 1;
      qtyInput.value = val + 1;
    });
    qtyInput.addEventListener("input", () => {
      let val = parseInt(qtyInput.value);
      if (isNaN(val) || val < 1) {
        qtyInput.value = 1;
      }
    });

    // Add to cart button
    addToCartBtn.addEventListener("click", () => {
      if (!currentItemId) return;

      const variantName = variantSelect.value;
      const qty = parseInt(qtyInput.value);
      if (isNaN(qty) || qty < 1) {
        alert("Please enter a valid quantity (1 or more).");
        return;
      }

      const itemData = menuData[currentItemId];
      const variantData = itemData.variants.find(v => v.name === variantName);
      if (!variantData) {
        alert("Selected variant not found.");
        return;
      }

      const key = currentItemId + "|" + variantName;

      if (cart[key]) {
        cart[key].qty += qty;
      } else {
        cart[key] = {
          id: currentItemId,
          name: itemData.name,
          variant: variantName,
          price: variantData.price,
          qty: qty
        };
      }

      addCartMessage.textContent = `${qty} x ${itemData.name} (${variantName}) added to cart.`;
      qtyInput.value = 1;

      renderCart();
    });

    // Render cart list and total
    function renderCart() {
      cartList.innerHTML = "";
      let totalPrice = 0;
      let totalItems = 0;

      const keys = Object.keys(cart);
      if (keys.length === 0) {
        cartList.innerHTML = '<p class="text-gray-600">Your cart is empty.</p>';
        checkoutBtn.disabled = true;
        cartTotalPrice.textContent = "$0.00";
        return;
      }

      keys.forEach(key => {
        const item = cart[key];
        totalItems += item.qty;
        totalPrice += item.price * item.qty;

        const itemDiv = document.createElement("div");
        itemDiv.className = "flex justify-between items-center border-b border-gray-200 py-2";

        const nameDiv = document.createElement("div");
        nameDiv.className = "text-gray-800 font-semibold";
        nameDiv.textContent = `${item.name} (${item.variant})`;

        const qtyDiv = document.createElement("div");
        qtyDiv.className = "flex items-center space-x-2";

        // Decrease qty button
        const decBtn = document.createElement("button");
        decBtn.className = "bg-orange-600 text-white px-2 py-1 rounded hover:bg-orange-700 transition";
        decBtn.innerHTML = '<i class="fas fa-minus"></i>';
        decBtn.title = "Decrease quantity";
        decBtn.addEventListener("click", () => {
          if (item.qty > 1) {
            item.qty--;
          } else {
            delete cart[key];
          }
          renderCart();
        });

        // Quantity display
        const qtySpan = document.createElement("span");
        qtySpan.className = "w-6 text-center";
        qtySpan.textContent = item.qty;

        // Increase qty button
        const incBtn = document.createElement("button");
        incBtn.className = "bg-orange-600 text-white px-2 py-1 rounded hover:bg-orange-700 transition";
        incBtn.innerHTML = '<i class="fas fa-plus"></i>';
        incBtn.title = "Increase quantity";
        incBtn.addEventListener("click", () => {
          item.qty++;
          renderCart();
        });

        qtyDiv.appendChild(decBtn);
        qtyDiv.appendChild(qtySpan);
        qtyDiv.appendChild(incBtn);

        const priceDiv = document.createElement("div");
        priceDiv.className = "font-semibold text-gray-700";
        priceDiv.textContent = `$${(item.price * item.qty).toFixed(2)}`;

        itemDiv.appendChild(nameDiv);
        itemDiv.appendChild(qtyDiv);
        itemDiv.appendChild(priceDiv);

        cartList.appendChild(itemDiv);
      });

      cartTotalPrice.textContent = `$${totalPrice.toFixed(2)}`;
      checkoutBtn.disabled = totalItems === 0;
    }

    // Checkout button
    checkoutBtn.addEventListener("click", () => {
      if (Object.keys(cart).length === 0) return;

      let summary = "Your order:\n\n";
      let totalPrice = 0;
      for (const key in cart) {
        const item = cart[key];
        summary += `${item.name} (${item.variant}) x${item.qty} = $${(item.price * item.qty).toFixed(2)}\n`;
        totalPrice += item.price * item.qty;
      }
      summary += `\nTotal: $${totalPrice.toFixed(2)}\n\nThank you for your order!`;

      alert(summary);

      // Clear cart
      for (const key in cart) {
        delete cart[key];
      }
      renderCart();
      addCartMessage.textContent = "";
      itemTitle.textContent = "Select a menu item to see ingredients and order options";
      ingredientsContent.innerHTML = "";
      orderSection.classList.add("hidden");
      currentItemId = null;
    });

    // Initialize empty cart display
    renderCart();
  </script>
</body>
</html>